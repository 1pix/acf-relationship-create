!function(t,e,a,i){"undefined"!=typeof acf&&(acf.addAction("prepare",function(){var e={bazalt_rc_open_tooltip:function(e){var a=this;t("#acf-rc-popup").remove();var i=this.val(),n=parseInt(this.get("max"));if(n>0&&i&&i.length>=n)return this.showNotice({text:acf.__("Maximum values reached ( {max} values )").replace("{max}",n),type:"warning"}),!1;var o=t(a.$el.find(".acf-rc-popup-wrapper").html());if(o.on("click","a",function(e){e.preventDefault(),a.$el.data("acfRcOpenUrl",{url:t(this).attr("data-create-url"),title:t(this).attr("title")}),a.bazalt_rc_open_lightbox(e)}),o.find("ul li").length>1){var r=t(e.currentTarget),l=a.$el.parents(".media-modal:first");if(1==l.length){l.find("div.media-frame-content div.settings").prepend(o);var c=a.$el.parents("td.acf-field:first"),d=1==c.length?a.$el.parents("td.acf-field:first").position().top:0;d+=a.$el.position().top-o.height()-6+(a.$el.outerHeight(!0)-a.$el.innerHeight());var p=1==c.length?a.$el.parents("td.acf-field:first").position().left:0;p+=a.$el.position().left-o.width()/2,p+=1==c.length?a.$el.outerWidth(!0):a.$el.outerWidth(!0)/2,o.css({top:d,left:p})}else t("body").prepend(o),o.css({top:r.offset().top-o.height()-6,left:r.offset().left-o.width()/2+r.outerWidth(!0)/2});var f=o.children(".focus");f.trigger("focus"),f.on("blur",function(t){a.bazalt_rc_close_tooltip()})}else o.find("ul li:first a:first").trigger("click")},bazalt_rc_trigger_open_tooltip:function(t,e){var a=this;setTimeout(function(){a.bazalt_rc_open_tooltip(t,a.$el)},300)},bazalt_rc_close_tooltip:function(){setTimeout(function(){t("#acf-rc-popup").remove()},200)},bazalt_rc_open_lightbox:function(e,a){var i=this.$el.data("acfRcOpenUrl").url;i=i.replace("__acf_rc_original_field_uniqid__",this.$el.attr("data-acf-rc-uniqid"));var n=this.$el.parents(".media-modal:first");1===n.length?(i=i.replace("__acf_rc_from_content_type__","attachment"),i=i.replace("__acf_rc_from_content_ID__",n.find("div.media-frame-content div.attachment-details").attr("data-id"))):(i=i.replace("__acf_rc_from_content_type__",t('form#post input[name="post_type"]').val()),i=i.replace("__acf_rc_from_content_ID__",t('form#post input[name="post_ID"]').val())),tb_show(this.$el.data("acfRcOpenUrl").title,i)},bazalt_rc_on_post_created:function(t,e,a){var i=this.newValue({id:a.post_id,text:a.post_title});this.$list("values").append(i),this.$input().trigger("change")}};t.extend(acf.models.RelationshipField.prototype,e),t.extend(acf.models.PostObjectField.prototype,e);var a={"click .acf-relationship-create-link":"bazalt_rc_trigger_open_tooltip",bazalt_rc_on_post_created:"bazalt_rc_on_post_created"};t.extend(acf.models.RelationshipField.prototype.events,a),t.extend(acf.models.PostObjectField.prototype.events,a)}),t(document).on("acf-relationship-create/created",function(e,i,n){if(void 0!==i){var o=t('[data-acf-rc-uniqid="'+i+'"]');if(1===o.length){switch(o.attr("data-type")){case"relationship":o.trigger("bazalt_rc_on_post_created",[n]);break;case"post_object":var r=o.find("select");if(1!==r.length)break;var l,c={id:n.post_id,text:n.post_title};l=r.select2("data"),""===c.text&&(c.text=a.i18n.no_title);if(r.find('option[value="'+c.id+'"]').length<1&&r.append(t("<option></option>").attr("value",c.id).text(c.text)),r.prop("multiple")){var d=[];t.each(l,function(e,a){r.find('option[value="'+a.id+'"]').length<1&&r.append(t("<option></option>").attr("value",a.id).text(a.text)),d.push(a.id)}),d.push(c.id.toString()),r.val(d).trigger("change")}else r.val(c.id.toString()).trigger("change")}tb_remove()}}}),t(document).ready(function(){function a(t,a){var i=t.find("a.acf-relationship-create-link");if(1===i.length){t.attr("data-acf-rc-uniqid",e.generate_random_id()),t.attr("data-acf-relationship-create-enabled",!0);var n="";switch(t.is("td")&&(n="repeater"),t.is("tr")&&(n="mediamodal"),n){case"repeater":if(t.is(".acf-field-relationship")){i.detach().appendTo(t.find("div.filters"));break}t.is(".acf-field-post-object")&&i.detach().appendTo(t.find(".acf-input"));break;case"mediamodal":i.detach().appendTo(t.find(".acf-label")),i.css({"margin-top":t.find(".acf-label label").css("margin-top"),"padding-top":t.find(".acf-label label").css("padding-top")});break;default:i.detach().appendTo(t.find(".acf-label"))}}}!1!==e.get_parent_iframe()&&(e.hide_admin_bar(),e.hide_admin_menu()),t("body").append('<div id="acf-rc-tooltip"></div>'),acf.add_action("load_field/type=relationship",function(t){a(t,"relationship")}),acf.add_action("append_field/type=relationship",function(t){a(t,"relationship")}),acf.add_action("load_field/type=post_object",function(t){a(t,"post_object")}),acf.add_action("append_field/type=post_object",function(t){a(t,"post_object")})}))}(jQuery,window.acf_relationship_create||{},window.acf_relationship_create_pro_field||{});